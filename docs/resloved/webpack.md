# webpack是什么
- `webpack`是基于`nodejs`的工程化套件，是前端资源的打包工具

# 讲一讲webpack的打包流程

# webpack对前端性能优化可以在哪些方面做文章
- 可以从比较常用的loader和Plugin来讲一讲
- 就拿url-loader来说
  - 为了减小文件的大小，可以把部分小并且不怎么变的的图片转换成base64格式的
  - 为了减少并发请求数，还可以放在js文件里
  - 为了可以更好的让浏览器使用缓存，在输出的文件夹名里可以生成新的哈希值，这点在每个出口文件里都用到了
- 可以拿MiniCssExtractPlugin来说
  - 为了实现更好的利用缓存，不同类型的文件最好分离打包、做好代码分割
  - 为了减少文件的大小，自然离不开压缩可以用CssMinimizerPlugin
- 可以拿TerserWebpackPlugin来说
  - 也就是tree shaking
  - 注释、console、没有使用的变量或者函数可以自动剔除  
- 为了可以更好的实现代码分割，可以再增加一个入口vendor
  - 比如一些库、框架抽离出来，独立打包，避免了重复打包，减少文件的体积

# 你有了解手写过一个loader吗？
- loader的实质就是一个function
- 我了解过一个很基本的loader的手写实现，就是babel-loader，它这个例子还实现了在代码里剔除console.log的功能
- 不过我看的这个手写的例子让我对js的编译原理产生了好奇，因为会涉及AST抽象语法树
- 它的实现流程就是通过引入babel的几个库函数，生成了AST抽象语法树后，通过traverse函数来变成es5的AST抽象语法树
- 在遍历途中剔除了console.log
- 最后就再通过功能函数来返回的是es5的代码

# 讲一讲tree shaking是怎么工作的
- 本质上利用了ES6模块系统的静态特性，模块的依赖关系在代码编译时就已确定，而且这些依赖关系是静态的，不会在运行时发生变化。
- 代码解析：使用编译器对JavaScript代码进行静态解析，构建抽象语法树（AST）。
- 标记无用代码：分析代码的AST，标记出那些不需要执行的代码段，例如未被引用的函数或类。
- 删除无用代码：将标记的无用代码从源代码中移除，生成一个精简的、只包含实际需要的代码的输出文件。

# webpack如何优化打包
1. 文件大小
   1. tree shaking、代码分割
   2. cache
2. 打包速度
   1. 配置optimization.splitChunks选项以进行代码分割。在这个例子中，设置chunks选项为async表示只对异步加载的模块进行代码分割（不对同步加载的模块进行分割），并将所有公共依赖项打包到名为common的chunk中。
    













